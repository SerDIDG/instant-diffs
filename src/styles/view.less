@import ( reference ) '@wikimedia/codex-design-tokens/theme-wikimedia-ui.less';

/******* VIEW *******/

.instantDiffs-view {
    // /* [Fix] Set top indent for the dialogs because of the fixed header on the some skins  */
    &.oo-ui-window-active {
        .oo-ui-windowManager-modal > & {
            top: var(--instantDiffs-view-top);
        }
    }

    .oo-ui-messageDialog-message {
        transition: opacity 150ms ease-in-out;

        &.is-transparent {
            opacity: 0;
        }
    }

    .oo-ui-windowManager-modal:not(.oo-ui-windowManager-size-full) & > {
        .instantDiffs-navigation {
            border-radius: var(--instantDiffs-view-radius) var(--instantDiffs-view-radius) 0 0;
        }

        .instantDiffs-view-loader {
            border-top-right-radius: max(var(--instantDiffs-view-radius), 0.28571429em) 0.28571429em;
            border-top-left-radius: max(var(--instantDiffs-view-radius), 0.28571429em) 0.28571429em;
        }
    }
}

.instantDiffs-view-overlay {
    position: absolute;
    inset: 0;
    z-index: -1;
}

.instantDiffs-view-loader {
    max-width: none;
    position: absolute;
    inset: 0 0 auto;
    z-index: 3;
    border-radius: 0;
    transition: opacity 150ms ease-in-out;

    .oo-ui-progressBarWidget-bar {
        animation-duration: 1000ms;
    }

    &.is-transparent {
        opacity: 0;
    }
}

/******* TOOLS *******/

.instantDiffs-view-tools {
    display: flex;
    justify-content: center;

    &:is(:empty) {
        display: none;
    }
}

/******* CONTENT *******/

.instantDiffs-view-content {
    width: auto;
    max-width: none;
    display: flow-root;
    margin: 0;
    font-size: var(--instantDiffs-font-size);
    line-height: var(--instantDiffs-line-height);
}

.instantDiffs-view-body {
    display: flow-root;
    position: relative;
    z-index: 1;

    .cdx-message--warning {
        margin-bottom: 1em;
    }

    #mw-fr-diff-headeritems {
        margin-top: 0;
    }

    #mw-fr-revisiontag-old {
        margin-bottom: 1em;
    }

    // /* Set a min height for the diff tools so they don't jump while loading */
    .mw-diff-table-prefix {
        min-height: 2rem;
        margin-top: 0;
    }

    // /* Fix overflow */
    .mw-diffPage-inlineToggle-container {
        .oo-ui-fieldLayout {
            > .oo-ui-fieldLayout-body {
                > .oo-ui-fieldLayout-field {
                    width: auto;
                }
            }
        }
    }

    // /* Reset styles for the rollback link */
    table.diff {
        .mw-rollback-link {
            display: initial;
        }
    }

    // /* Hide table of contents */
    #toc {
        display: none;
    }
}